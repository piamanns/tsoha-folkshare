{% extends "layout.html" %}
{% block title %}{{ tune.name }}{% endblock %}
{% block content %}
<script>
  var script = document.createElement('script');
  script.onload = function(event) {
    ABCJS.renderAbc("notation", '{{ tune.notation }}');  
  }
  script.defer = true;
  script.src = "{{url_for('static', filename='abcjs-basic-min.js')}}";
  document.body.append(script);
</script>

<h2>{{ tune.name }}</h2>
<p>Lisääjä <strong>{{ tune.username }}</strong> ({{ tune.created.strftime("%d.%m.%Y") }})</p>

<div id="notation">
  <p>Nuotti latautuu</p>
</div>

{% if categories %}
  <p><strong>Kappale on liitetty kategorioihin:</strong></p>
  {% for category in categories %}
    <a href="/category/{{ category.id }}">{{ category.name }}</a> |
  {% endfor %}
{% endif %}
{% endblock %}
